{"ast":null,"code":"import _classCallCheck from \"D:\\\\company\\\\algo-manage\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\company\\\\algo-manage\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\company\\\\algo-manage\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\company\\\\algo-manage\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\company\\\\algo-manage\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport \"antd/lib/menu/style\";\nimport _Menu from \"antd/lib/menu\";\nvar _jsxFileName = \"D:\\\\company\\\\algo-manage\\\\src\\\\components\\\\SiderMenu\\\\index.js\";\nimport React, { PureComponent } from \"react\";\nimport { withRouter } from \"react-router-dom\"; // import menus from \"../../config/menus\";\n\nimport { connect } from \"react-redux\";\nimport styles from \"./index.module.less\";\nvar SubMenu = _Menu.SubMenu;\n\nvar Menus =\n/*#__PURE__*/\nfunction (_PureComponent) {\n  _inherits(Menus, _PureComponent);\n\n  function Menus() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Menus);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Menus)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      openKeys: []\n    };\n\n    _this.renderMenu = function (menuArr) {\n      // console.log(\"menuArr \", menuArr);\n      return menuArr.map(function (item) {\n        if (item.children) {\n          return React.createElement(SubMenu, {\n            title: React.createElement(\"span\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 21\n              },\n              __self: this\n            }, React.createElement(\"span\", {\n              className: styles[\"\".concat(item.icon)],\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 23\n              },\n              __self: this\n            }), React.createElement(\"span\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 24\n              },\n              __self: this\n            }, item.title)),\n            key: item.path,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 19\n            },\n            __self: this\n          }, _this.renderMenu(item.children));\n        }\n\n        if (item.icon) {\n          return React.createElement(_Menu.Item, {\n            key: item.path,\n            onClick: _this.handleMenuClick,\n            className: \"level1\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 35\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"iconDiv\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 40\n            },\n            __self: this\n          }, React.createElement(\"span\", {\n            className: styles[\"\".concat(item.icon)],\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 41\n            },\n            __self: this\n          }), React.createElement(\"span\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 42\n            },\n            __self: this\n          }, item.title)));\n        }\n\n        return React.createElement(_Menu.Item, {\n          key: item.path,\n          onClick: _this.handleMenuClick,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 48\n          },\n          __self: this\n        }, item.title);\n      });\n    };\n\n    _this.handleMenuClick = function (menu) {\n      // console.log(this.props);\n      _this.props.history.push(menu.key);\n    };\n\n    _this.getOpenKeys = function (menus, selectedKey, firstLevel) {\n      if (menus.length >= 0) {\n        for (var i = 0; i < menus.length; i++) {\n          var submenu = menus[i]; // console.log(\"submenu :\", submenu);\n\n          if (submenu.children) {\n            //首层 初始化 展开的菜单\n            if (firstLevel) {\n              _this.keys = [];\n            }\n\n            _this.keys.push(submenu.path);\n\n            var res = _this.findPath(submenu.children, selectedKey);\n\n            if (res.length > 0) {\n              // console.log(\"找到了 \", selectedKey);\n              // console.log(\"上级菜单 \", this.keys);\n              break;\n            } else {\n              _this.getOpenKeys(submenu.children, selectedKey);\n            }\n          }\n        }\n      }\n    };\n\n    _this.findPath = function (arr, path) {\n      var res = arr.filter(function (item) {\n        return item.path == path;\n      });\n      return res;\n    };\n\n    _this.onOpenChange = function (openKeys) {\n      console.log(\"openKeys :\", openKeys);\n\n      _this.setState({\n        openKeys: openKeys\n      });\n    };\n\n    _this.changeMenus = function () {\n      // console.log(\"changeMenus 侧边栏\");\n      var auth = sessionStorage.auth;\n\n      if (sessionStorage.menusBackup != undefined) {\n        window.menus = JSON.parse(sessionStorage.menusBackup); // console.log(window.menus);\n      }\n\n      if (!auth) {\n        console.log(\"没有权限菜单，显示本地菜单\");\n        return;\n      } // let newAuth = auth.replace(/name/g, \"title\");\n\n\n      var authMenu = JSON.parse(auth); // console.log(JSON.stringify(window.menus));\n      // console.log(window.menus);\n      // console.log(authMenu);\n      // authMenu[0].auth = 0;\n      // window.menus = menu;\n\n      for (var i = 0; i < window.menus.length; i++) {\n        var localItem = window.menus[i]; // console.log(\"本地 \", localItem);\n\n        for (var j = 0; j < authMenu.length; j++) {\n          var authItem = authMenu[j]; // console.log(\"权限 \", authItem);\n\n          if (localItem.title == authItem.name) {\n            localItem.auth = authItem.auth; //删除 不显示的菜单\n            // console.log(localItem, i, j);\n\n            if (authItem.auth != 1) {\n              // console.log(\"不显示一级 \", localItem);\n              window.menus.splice(i, 1);\n              i--;\n              break;\n            }\n\n            if (localItem.hasOwnProperty(\"children\") && authItem.hasOwnProperty(\"children\")) {\n              var localChild = localItem.children;\n              var authChild = authItem.children;\n\n              for (var k = 0; k < localChild.length; k++) {\n                var localChildItem = localChild[k]; // console.log(\"local:--- \", k, localChildItem);\n\n                for (var l = 0; l < authChild.length; l++) {\n                  // console.log(\"authChild: \",authChild[l]);\n                  if (localChildItem.title == authChild[l].name) {\n                    localChildItem.auth = authChild[l].auth;\n                    localChildItem.cmpt = authChild[l].cmpt;\n\n                    if (authChild[l].auth != 1) {\n                      // console.log(\"不显示二级菜单 aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\", localChildItem);\n                      localChild.splice(k, 1);\n                      k--;\n                      break;\n                    }\n                  }\n                }\n              }\n            }\n\n            break;\n          }\n        }\n      } // console.log(JSON.stringify(window.menus));\n\n    };\n\n    return _this;\n  }\n\n  _createClass(Menus, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {// this.setState({\n      //   openKeys: t\n      // });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      // this.changeMenus();\n      window.menus = JSON.parse(sessionStorage.activeMenus);\n      var path = this.props.path; //获取默认 展开菜单\n\n      this.keys = [];\n      this.getOpenKeys(window.menus, path, true);\n      this.defaultOpenKeys = this.keys ? this.keys : [\"/main/option\"];\n      this.defaultSelectedKeys = path ? [path] : [\"/main/algo/buy\"]; // this.defaultOpenKeys = [\"/main\"];\n      // this.defaultSelectedKeys = [\"/main/test\"];\n      // console.log(\"默认展开菜单 :\", this.defaultOpenKeys);\n      // console.log(\"默认选中 :\", this.defaultSelectedKeys);\n\n      return React.createElement(\"div\", {\n        className: styles.slider,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(_Menu, {\n        mode: \"inline\" // theme=\"dark\"\n        ,\n        defaultSelectedKeys: this.defaultSelectedKeys,\n        defaultOpenKeys: this.defaultOpenKeys // onOpenChange={this.onOpenChange}\n        ,\n        selectedKeys: this.defaultSelectedKeys,\n        style: {\n          borderRight: 0\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, this.renderMenu(window.menus)));\n    }\n  }]);\n\n  return Menus;\n}(PureComponent);\n\nvar mapStateToProps = function mapStateToProps(state, ownProps) {\n  return {\n    path: state.RouterModel.path\n  };\n};\n\nexport default connect(mapStateToProps, null)(withRouter(Menus)); // export default withRouter(Menus);","map":{"version":3,"sources":["D:/company/algo-manage/src/components/SiderMenu/index.js"],"names":["React","PureComponent","withRouter","connect","styles","SubMenu","Menus","state","openKeys","renderMenu","menuArr","map","item","children","icon","title","path","handleMenuClick","menu","props","history","push","key","getOpenKeys","menus","selectedKey","firstLevel","length","i","submenu","keys","res","findPath","arr","filter","onOpenChange","console","log","setState","changeMenus","auth","sessionStorage","menusBackup","undefined","window","JSON","parse","authMenu","localItem","j","authItem","name","splice","hasOwnProperty","localChild","authChild","k","localChildItem","l","cmpt","activeMenus","defaultOpenKeys","defaultSelectedKeys","slider","borderRight","mapStateToProps","ownProps","RouterModel"],"mappings":"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","sourcesContent":["import React, { PureComponent } from \"react\";\r\nimport { Menu, Icon } from \"antd\";\r\nimport { withRouter } from \"react-router-dom\";\r\n// import menus from \"../../config/menus\";\r\nimport { connect } from \"react-redux\";\r\nimport styles from \"./index.module.less\";\r\n\r\nconst { SubMenu } = Menu;\r\n\r\nclass Menus extends PureComponent {\r\n    state = {\r\n        openKeys: [],\r\n    };\r\n    renderMenu = (menuArr) => {\r\n        // console.log(\"menuArr \", menuArr);\r\n        return menuArr.map((item) => {\r\n            if (item.children) {\r\n                return (\r\n                    <SubMenu\r\n                        title={\r\n                            <span>\r\n                                {/* <Icon type={item.icon || \"home\"}></Icon> */}\r\n                                <span className={styles[`${item.icon}`]}></span>\r\n                                <span>{item.title}</span>\r\n                            </span>\r\n                        }\r\n                        key={item.path}\r\n                    >\r\n                        {this.renderMenu(item.children)}\r\n                    </SubMenu>\r\n                );\r\n            }\r\n            if (item.icon) {\r\n                return (\r\n                    <Menu.Item\r\n                        key={item.path}\r\n                        onClick={this.handleMenuClick}\r\n                        className=\"level1\"\r\n                    >\r\n                        <div className=\"iconDiv\">\r\n                            <span className={styles[`${item.icon}`]}></span>\r\n                            <span>{item.title}</span>\r\n                        </div>\r\n                    </Menu.Item>\r\n                );\r\n            }\r\n            return (\r\n                <Menu.Item key={item.path} onClick={this.handleMenuClick}>\r\n                    {item.title}\r\n                </Menu.Item>\r\n            );\r\n        });\r\n    };\r\n    handleMenuClick = (menu) => {\r\n        // console.log(this.props);\r\n        this.props.history.push(menu.key);\r\n    };\r\n    //获取应该 展开的子菜单\r\n    getOpenKeys = (menus, selectedKey, firstLevel) => {\r\n        if (menus.length >= 0) {\r\n            for (let i = 0; i < menus.length; i++) {\r\n                const submenu = menus[i];\r\n                // console.log(\"submenu :\", submenu);\r\n                if (submenu.children) {\r\n                    //首层 初始化 展开的菜单\r\n                    if (firstLevel) {\r\n                        this.keys = [];\r\n                    }\r\n                    this.keys.push(submenu.path);\r\n                    let res = this.findPath(submenu.children, selectedKey);\r\n                    if (res.length > 0) {\r\n                        // console.log(\"找到了 \", selectedKey);\r\n                        // console.log(\"上级菜单 \", this.keys);\r\n                        break;\r\n                    } else {\r\n                        this.getOpenKeys(submenu.children, selectedKey);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n    findPath = (arr, path) => {\r\n        let res = arr.filter((item) => item.path == path);\r\n        return res;\r\n    };\r\n\r\n    onOpenChange = (openKeys) => {\r\n        console.log(\"openKeys :\", openKeys);\r\n        this.setState({\r\n            openKeys: openKeys,\r\n        });\r\n    };\r\n    componentDidMount() {\r\n        // this.setState({\r\n        //   openKeys: t\r\n        // });\r\n    }\r\n    changeMenus = () => {\r\n        // console.log(\"changeMenus 侧边栏\");\r\n        let auth = sessionStorage.auth;\r\n        if (sessionStorage.menusBackup != undefined) {\r\n            window.menus = JSON.parse(sessionStorage.menusBackup);\r\n            // console.log(window.menus);\r\n        }\r\n        if (!auth) {\r\n            console.log(\"没有权限菜单，显示本地菜单\");\r\n            return;\r\n        }\r\n        // let newAuth = auth.replace(/name/g, \"title\");\r\n        let authMenu = JSON.parse(auth);\r\n        // console.log(JSON.stringify(window.menus));\r\n        // console.log(window.menus);\r\n        // console.log(authMenu);\r\n        // authMenu[0].auth = 0;\r\n        // window.menus = menu;\r\n        for (let i = 0; i < window.menus.length; i++) {\r\n            let localItem = window.menus[i];\r\n            // console.log(\"本地 \", localItem);\r\n            for (let j = 0; j < authMenu.length; j++) {\r\n                let authItem = authMenu[j];\r\n                // console.log(\"权限 \", authItem);\r\n                if (localItem.title == authItem.name) {\r\n                    localItem.auth = authItem.auth;\r\n                    //删除 不显示的菜单\r\n                    // console.log(localItem, i, j);\r\n                    if (authItem.auth != 1) {\r\n                        // console.log(\"不显示一级 \", localItem);\r\n                        window.menus.splice(i, 1);\r\n                        i--;\r\n                        break;\r\n                    }\r\n                    if (\r\n                        localItem.hasOwnProperty(\"children\") &&\r\n                        authItem.hasOwnProperty(\"children\")\r\n                    ) {\r\n                        let localChild = localItem.children;\r\n                        let authChild = authItem.children;\r\n                        for (let k = 0; k < localChild.length; k++) {\r\n                            let localChildItem = localChild[k];\r\n                            // console.log(\"local:--- \", k, localChildItem);\r\n                            for (let l = 0; l < authChild.length; l++) {\r\n                                // console.log(\"authChild: \",authChild[l]);\r\n                                if (localChildItem.title == authChild[l].name) {\r\n                                    localChildItem.auth = authChild[l].auth;\r\n                                    localChildItem.cmpt = authChild[l].cmpt;\r\n                                    if (authChild[l].auth != 1) {\r\n                                        // console.log(\"不显示二级菜单 aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\", localChildItem);\r\n                                        localChild.splice(k, 1);\r\n                                        k--;\r\n                                        break;\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        // console.log(JSON.stringify(window.menus));\r\n    };\r\n    render() {\r\n        // this.changeMenus();\r\n        window.menus = JSON.parse(sessionStorage.activeMenus);\r\n        let { path } = this.props;\r\n        //获取默认 展开菜单\r\n        this.keys = [];\r\n        this.getOpenKeys(window.menus, path, true);\r\n        this.defaultOpenKeys = this.keys ? this.keys : [\"/main/option\"];\r\n        this.defaultSelectedKeys = path ? [path] : [\"/main/algo/buy\"];\r\n        // this.defaultOpenKeys = [\"/main\"];\r\n        // this.defaultSelectedKeys = [\"/main/test\"];\r\n        // console.log(\"默认展开菜单 :\", this.defaultOpenKeys);\r\n        // console.log(\"默认选中 :\", this.defaultSelectedKeys);\r\n        return (\r\n            <div className={styles.slider}>\r\n                {/* <div className={styles.logo}>\r\n                    <img src=\"./assets/logo.png\" alt=\"\" />\r\n                    <h1>华云信息</h1>\r\n                </div> */}\r\n                <Menu\r\n                    mode=\"inline\"\r\n                    // theme=\"dark\"\r\n                    defaultSelectedKeys={this.defaultSelectedKeys}\r\n                    defaultOpenKeys={this.defaultOpenKeys}\r\n                    // onOpenChange={this.onOpenChange}\r\n                    selectedKeys={this.defaultSelectedKeys}\r\n                    style={{ borderRight: 0 }}\r\n                >\r\n                    {this.renderMenu(window.menus)}\r\n                </Menu>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    return {\r\n        path: state.RouterModel.path,\r\n    };\r\n};\r\nexport default connect(mapStateToProps, null)(withRouter(Menus));\r\n// export default withRouter(Menus);\r\n"]},"metadata":{},"sourceType":"module"}