{"ast":null,"code":"import _classCallCheck from \"D:\\\\company\\\\algo-manage\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\company\\\\algo-manage\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\company\\\\algo-manage\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\company\\\\algo-manage\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\company\\\\algo-manage\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\company\\\\algo-manage\\\\src\\\\components\\\\ChartComponent\\\\index.js\";\nimport React from \"react\"; // import { DatePicker, Input } from \"antd\";\n\nimport styles from \"./style.module.less\";\nimport SearchForm from \"@/components/SearchForm\";\nimport moment from \"moment\";\nimport echarts from \"echarts/lib/echarts\";\nimport \"echarts/lib/chart/bar\";\nimport \"echarts/lib/chart/line\";\nimport \"echarts/lib/chart/gauge\"; //引入提示框和标题组件\n\nimport \"echarts/lib/component/tooltip\";\nimport \"echarts/lib/component/title\";\nimport \"echarts/lib/component/grid\";\nimport \"echarts/lib/component/legend\"; //引入滑动条\n\nimport \"echarts/lib/component/dataZoom\";\nimport \"echarts/lib/component/dataZoomInside\";\nimport \"echarts/lib/component/dataZoomSlider\";\nimport \"echarts/lib/component/visualMap\";\nimport \"echarts/lib/component/markLine\";\n\nvar ChartComponent =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  _inherits(ChartComponent, _React$PureComponent);\n\n  function ChartComponent() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ChartComponent);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ChartComponent)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.handleSearch = function (_ref) {\n      var form = _ref.form;\n      _this.searchForm = form;\n\n      var params = _this.searchForm.getFieldsValue();\n\n      for (var key in params) {\n        if (params[key] instanceof moment) {\n          params[key] = params[key].format(\"YYYYMMDD\");\n        }\n\n        if (params[key] == undefined) {\n          params[key] = \"\";\n        }\n      }\n\n      _this.props.getSearchList(params, form);\n    };\n\n    _this.initEchart = function (options) {\n      // console.log(options);\n      if (!document.getElementsByClassName(\"chartCom\".concat(_this.pageId))[0]) {\n        return;\n      }\n\n      var theme = options.theme ? options.theme : \"default\";\n\n      if (_this.chart) {\n        _this.chart.resize();\n      } else {\n        _this.chart = echarts.init(document.getElementsByClassName(\"chartCom\".concat(_this.pageId))[0], theme);\n      }\n\n      _this.chart.setOption(options, true);\n    };\n\n    _this.resizeAc = function () {\n      if (_this.timeOut) {\n        clearTimeout(_this.timeOut);\n      }\n\n      _this.timeOut = setTimeout(function () {\n        _this.initEchart(_this.props.dataSource);\n      }, 50);\n    };\n\n    return _this;\n  }\n\n  _createClass(ChartComponent, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      window.addEventListener(\"resize\", this.resizeAc);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      window.removeEventListener(\"resize\", this.resizeAc);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          _this$props$searchLoa = _this$props.searchLoading,\n          searchLoading = _this$props$searchLoa === void 0 ? false : _this$props$searchLoa,\n          _this$props$isShowSea = _this$props.isShowSearchForm,\n          isShowSearchForm = _this$props$isShowSea === void 0 ? true : _this$props$isShowSea,\n          getSearchFormFields = _this$props.getSearchFormFields;\n\n      if (!this.pageId) {\n        if (!window.pageId) {\n          window.pageId = 1;\n        }\n\n        this.pageId = window.pageId;\n        window.pageId += 1;\n      }\n\n      if (this.props.dataSource.hasOwnProperty(\"xAxis\")) {\n        this.initEchart(this.props.dataSource);\n      }\n\n      return React.createElement(\"div\", {\n        className: styles.chartComponent,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, isShowSearchForm && React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: styles.wrap,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(SearchForm, {\n        fields: getSearchFormFields,\n        onSearchClick: this.handleSearch,\n        searchLoading: searchLoading,\n        pageId: this.pageId,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        style: {\n          position: \"absolute\",\n          width: \"200%\",\n          height: \"5px\",\n          background: \"#ddd\",\n          zIndex: \"0\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        style: {\n          height: \"700px\",\n          padding: \"30px\"\n        },\n        className: \"chartCom\".concat(this.pageId, \" \") + styles.wrap,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return ChartComponent;\n}(React.PureComponent);\n\nexport { ChartComponent as default };","map":{"version":3,"sources":["D:/company/algo-manage/src/components/ChartComponent/index.js"],"names":["React","styles","SearchForm","moment","echarts","ChartComponent","handleSearch","form","searchForm","params","getFieldsValue","key","format","undefined","props","getSearchList","initEchart","options","document","getElementsByClassName","pageId","theme","chart","resize","init","setOption","resizeAc","timeOut","clearTimeout","setTimeout","dataSource","window","addEventListener","removeEventListener","searchLoading","isShowSearchForm","getSearchFormFields","hasOwnProperty","chartComponent","wrap","position","width","height","background","zIndex","padding","PureComponent"],"mappings":"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","sourcesContent":["import React from \"react\";\r\n// import { DatePicker, Input } from \"antd\";\r\nimport styles from \"./style.module.less\";\r\n\r\nimport SearchForm from \"@/components/SearchForm\";\r\nimport moment from \"moment\";\r\nimport echarts from \"echarts/lib/echarts\";\r\nimport \"echarts/lib/chart/bar\";\r\nimport \"echarts/lib/chart/line\";\r\nimport \"echarts/lib/chart/gauge\";\r\n//引入提示框和标题组件\r\nimport \"echarts/lib/component/tooltip\";\r\nimport \"echarts/lib/component/title\";\r\nimport \"echarts/lib/component/grid\";\r\nimport \"echarts/lib/component/legend\";\r\n//引入滑动条\r\nimport \"echarts/lib/component/dataZoom\";\r\nimport \"echarts/lib/component/dataZoomInside\";\r\nimport \"echarts/lib/component/dataZoomSlider\";\r\n\r\nimport \"echarts/lib/component/visualMap\";\r\nimport \"echarts/lib/component/markLine\";\r\n\r\nexport default class ChartComponent extends React.PureComponent {\r\n    //获取搜索栏数据\r\n    handleSearch = ({ form }) => {\r\n        this.searchForm = form;\r\n        let params = this.searchForm.getFieldsValue();\r\n        for (const key in params) {\r\n            if (params[key] instanceof moment) {\r\n                params[key] = params[key].format(\"YYYYMMDD\");\r\n            }\r\n            if (params[key] == undefined) {\r\n                params[key] = \"\";\r\n            }\r\n        }\r\n        this.props.getSearchList(params, form);\r\n    };\r\n\r\n    initEchart = (options) => {\r\n        // console.log(options);\r\n        if (!document.getElementsByClassName(`chartCom${this.pageId}`)[0]) {\r\n            return;\r\n        }\r\n        let theme = options.theme ? options.theme : \"default\";\r\n        if (this.chart) {\r\n            this.chart.resize();\r\n        } else {\r\n            this.chart = echarts.init(\r\n                document.getElementsByClassName(`chartCom${this.pageId}`)[0],\r\n                theme\r\n            );\r\n        }\r\n        this.chart.setOption(options, true);\r\n    };\r\n    resizeAc = () => {\r\n        if (this.timeOut) {\r\n            clearTimeout(this.timeOut);\r\n        }\r\n        this.timeOut = setTimeout(() => {\r\n            this.initEchart(this.props.dataSource);\r\n        }, 50);\r\n    };\r\n    componentDidMount() {\r\n        window.addEventListener(\"resize\", this.resizeAc);\r\n    }\r\n    componentWillUnmount() {\r\n        window.removeEventListener(\"resize\", this.resizeAc);\r\n    }\r\n    render() {\r\n        let {\r\n            searchLoading = false,\r\n            isShowSearchForm = true,\r\n            getSearchFormFields,\r\n        } = this.props;\r\n        if (!this.pageId) {\r\n            if (!window.pageId) {\r\n                window.pageId = 1;\r\n            }\r\n            this.pageId = window.pageId;\r\n            window.pageId += 1;\r\n        }\r\n        if (this.props.dataSource.hasOwnProperty(\"xAxis\")) {\r\n            this.initEchart(this.props.dataSource);\r\n        }\r\n        return (\r\n            <div className={styles.chartComponent}>\r\n                {isShowSearchForm && (\r\n                    <div>\r\n                        <div className={styles.wrap}>\r\n                            <SearchForm\r\n                                fields={getSearchFormFields}\r\n                                onSearchClick={this.handleSearch}\r\n                                searchLoading={searchLoading}\r\n                                pageId={this.pageId}\r\n                            ></SearchForm>\r\n                        </div>\r\n                        <div\r\n                            style={{\r\n                                position: \"absolute\",\r\n                                width: \"200%\",\r\n                                height: \"5px\",\r\n                                background: \"#ddd\",\r\n                                zIndex: \"0\",\r\n                            }}\r\n                        ></div>\r\n                    </div>\r\n                )}\r\n\r\n                <div\r\n                    style={{ height: \"700px\", padding: \"30px\" }}\r\n                    className={`chartCom${this.pageId} ` + styles.wrap}\r\n                ></div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}