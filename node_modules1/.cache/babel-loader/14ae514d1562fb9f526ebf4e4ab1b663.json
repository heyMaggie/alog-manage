{"ast":null,"code":"import _objectWithoutProperties from \"D:\\\\company\\\\algo-manage\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectWithoutProperties\";\nimport \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/input/style\";\nimport _Input from \"antd/lib/input\";\nimport \"antd/lib/popconfirm/style\";\nimport _Popconfirm from \"antd/lib/popconfirm\";\nimport _regeneratorRuntime from \"D:\\\\company\\\\algo-manage\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"D:\\\\company\\\\algo-manage\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _toConsumableArray from \"D:\\\\company\\\\algo-manage\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"D:\\\\company\\\\algo-manage\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\company\\\\algo-manage\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\company\\\\algo-manage\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\company\\\\algo-manage\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\company\\\\algo-manage\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\company\\\\algo-manage\\\\src\\\\components\\\\CrudFilterComponent\\\\index.js\";\nimport React from \"react\";\nimport Highlighter from \"react-highlight-words\";\nimport styles from \"./index.module.less\";\nimport SearchForm from \"@/components/SearchForm\";\nimport DynamicModal from \"@/components/DynamicModal\";\nimport Table from \"@/components/Table\";\nimport DynamicDescriptions from \"@/components/DynamicDescriptions\";\n\nvar CrudFilterComponent =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  _inherits(CrudFilterComponent, _React$PureComponent);\n\n  function CrudFilterComponent() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, CrudFilterComponent);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(CrudFilterComponent)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      insertModalVisible: false,\n      updateModalVisible: false,\n      detailModalVisible: false,\n      scroll: _this.props.scroll,\n      searchText: \"\",\n      searchedColumn: \"\",\n      searchMethod: {\n        getColumnSearchProps: _this.getColumnSearchProps\n      }\n    };\n\n    _this.handleInsertBtn = function () {\n      _this.setState({\n        insertModalVisible: true // updateModalVisible: true\n\n      });\n    };\n\n    _this.handleInsertModalReady = function (_ref) {\n      var form = _ref.form;\n      _this.insertForm = form;\n      var onInsertModalReady = _this.props.onInsertModalReady;\n\n      if (typeof onInsertModalReady == \"function\") {\n        onInsertModalReady({\n          form: form\n        });\n      }\n    };\n\n    _this.handleInsertModalOk = function () {\n      var insertRecord = _this.props.insertRecord;\n\n      if (typeof insertRecord == \"function\") {\n        // insertRecord({ form: this.insertForm });\n        _this.insertForm.validateFields(function (err, values) {\n          if (!err) {\n            insertRecord(_this.getInsertFormValue());\n\n            _this.insertForm.resetFields();\n\n            _this.setState({\n              insertModalVisible: false\n            });\n          }\n        });\n      }\n    };\n\n    _this.handleInsertModalCancel = function () {\n      _this.setState({\n        insertModalVisible: false\n      });\n    };\n\n    _this.handleUpdateModalReady = function (_ref2) {\n      var form = _ref2.form;\n      // console.log(\"handleUpdateModalReady\");\n      _this.updateForm = form;\n      var onUpdateModalReady = _this.props.onUpdateModalReady;\n\n      if (typeof onUpdateModalReady == \"function\") {\n        onUpdateModalReady({\n          form: form\n        });\n      }\n    };\n\n    _this.handleUpdateModalOk = function () {\n      var updateRecord = _this.props.updateRecord;\n\n      if (typeof updateRecord == \"function\") {\n        updateRecord({\n          form: _this.updateForm\n        });\n      }\n\n      _this.setState({\n        updateModalVisible: false\n      });\n    };\n\n    _this.handleUpdateModalCancel = function () {\n      _this.setState({\n        updateModalVisible: false\n      });\n    };\n\n    _this.handleDetailModalCancel = function () {\n      _this.setState({\n        detailModalVisible: false\n      });\n    };\n\n    _this.addUpdateDeleteColumns = function (columns) {\n      var newCol = columns;\n      var _this$props = _this.props,\n          updateRecord = _this$props.updateRecord,\n          deleteRecord = _this$props.deleteRecord,\n          setUpdateModal = _this$props.setUpdateModal;\n\n      if (updateRecord || deleteRecord) {\n        newCol = [].concat(_toConsumableArray(columns), [{\n          title: \"操作\",\n          key: \"action\",\n          align: \"center\",\n          fixed: \"right\",\n          width: 120,\n          render: function render(text, record) {\n            return React.createElement(\"div\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 98\n              },\n              __self: this\n            }, updateRecord && React.createElement(\"a\", {\n              // style={{ color: \"#3281ff\" }}\n              style: {\n                color: \"#3281ff\"\n              },\n              onClick: function onClick() {\n                _this.setState({\n                  updateModalVisible: true\n                });\n\n                if (_this.updateForm) {\n                  setUpdateModal({\n                    form: _this.updateForm,\n                    record: record\n                  });\n                } else {\n                  //第一次 updateModal 需要创建 动态表单\n                  setTimeout(function () {\n                    setUpdateModal({\n                      form: _this.updateForm,\n                      record: record\n                    });\n                  }, 0);\n                }\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 100\n              },\n              __self: this\n            }, \"\\u7F16\\u8F91\"), deleteRecord && React.createElement(_Popconfirm, {\n              title: \"\\u662F\\u5426\\u786E\\u8BA4\\u5220\\u9664?\",\n              onConfirm:\n              /*#__PURE__*/\n              _asyncToGenerator(\n              /*#__PURE__*/\n              _regeneratorRuntime.mark(function _callee() {\n                return _regeneratorRuntime.wrap(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        return _context.abrupt(\"return\", deleteRecord(record));\n\n                      case 1:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, _callee);\n              })),\n              okText: \"\\u786E\\u8BA4\",\n              cancelText: \"\\u53D6\\u6D88\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 127\n              },\n              __self: this\n            }, React.createElement(\"a\", {\n              style: {\n                color: \"#3281ff\",\n                margin: \"0 16px\"\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 135\n              },\n              __self: this\n            }, \"\\u5220\\u9664\")));\n          }\n        }]);\n      }\n\n      return newCol;\n    };\n\n    _this.getColumnSearchProps = function (dataIndex) {\n      return {\n        filterDropdown: function filterDropdown(_ref4) {\n          var setSelectedKeys = _ref4.setSelectedKeys,\n              selectedKeys = _ref4.selectedKeys,\n              confirm = _ref4.confirm,\n              clearFilters = _ref4.clearFilters;\n          return React.createElement(\"div\", {\n            style: {\n              padding: 8\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 160\n            },\n            __self: this\n          }, React.createElement(_Input, {\n            ref: function ref(node) {\n              _this.searchInput = node;\n            },\n            placeholder: \"\\u7B5B\\u9009 \".concat(dataIndex),\n            value: selectedKeys[0],\n            onChange: function onChange(e) {\n              return setSelectedKeys(e.target.value ? [e.target.value] : []);\n            },\n            onPressEnter: function onPressEnter() {\n              return _this.handleFilterSearch(selectedKeys, confirm, dataIndex);\n            },\n            style: {\n              width: 188,\n              marginBottom: 8,\n              display: \"block\"\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 161\n            },\n            __self: this\n          }), React.createElement(_Button, {\n            type: \"primary\",\n            onClick: function onClick() {\n              return _this.handleFilterSearch(selectedKeys, confirm, dataIndex);\n            } // icon={<SearchOutlined />}\n            ,\n            size: \"small\",\n            style: {\n              width: 90,\n              marginRight: 8\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 179\n            },\n            __self: this\n          }, \"\\u67E5\\u8BE2\"), React.createElement(_Button, {\n            onClick: function onClick() {\n              return _this.handleReset(clearFilters);\n            },\n            size: \"small\",\n            style: {\n              width: 90\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 194\n            },\n            __self: this\n          }, \"\\u91CD\\u7F6E\"));\n        },\n        onFilter: function onFilter(value, record) {\n          return record[dataIndex].toString().toLowerCase().includes(value.toLowerCase());\n        },\n        onFilterDropdownVisibleChange: function onFilterDropdownVisibleChange(visible) {\n          if (visible) {\n            setTimeout(function () {\n              return _this.searchInput.select();\n            });\n          }\n        },\n        render: function render(text) {\n          return _this.state.searchedColumn === dataIndex ? React.createElement(Highlighter, {\n            highlightStyle: {\n              backgroundColor: \"#ffc069\",\n              padding: 0\n            },\n            searchWords: [_this.state.searchText],\n            autoEscape: true,\n            textToHighlight: text.toString(),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 215\n            },\n            __self: this\n          }) : text;\n        }\n      };\n    };\n\n    _this.computeTableY = function () {\n      var pageWraper = document.querySelector(\".pageId\" + _this.pageId);\n      var thHeight = pageWraper.querySelector(\".ant-table-thead\").offsetHeight;\n      var pagiDiv = pageWraper.querySelector(\".ant-pagination.ant-table-pagination\");\n\n      if (pagiDiv) {\n        var pagiHeight = pagiDiv.offsetHeight;\n        var pagiMt = getComputedStyle(pagiDiv).marginTop.replace(/px/, \"\") / 1;\n        var pagiMb = getComputedStyle(pagiDiv).marginBottom.replace(/px/, \"\") / 1; // console.log(thHeight + pagiHeight + pagiMt + pagiMb);\n\n        var computeY = _this.refs.tableWrap.clientHeight - thHeight - pagiHeight - pagiMt - pagiMb;\n\n        _this.setState({\n          scroll: Object.assign({}, _this.state.scroll, {\n            y: computeY\n          })\n        }, function () {\n          _this.refs.tableWrap.querySelector(\".ant-table-body\").style.height = computeY + \"px\";\n        });\n      } else {\n        _this.setState({\n          scroll: Object.assign({}, _this.state.scroll, {\n            y: 0\n          })\n        }, function () {\n          _this.refs.tableWrap.querySelector(\".ant-table-body\").style.height = \"54px\";\n        });\n      }\n    };\n\n    _this.getInsertFormFields = function () {\n      if (typeof _this.props.getInsertFormFields == \"function\") {\n        var dataArr = _this.props.getInsertFormFields();\n\n        for (var i = 0; i < dataArr.length; i++) {\n          var item = dataArr[i];\n\n          if (!_this.insertId) {\n            _this.insertId = parseInt(Math.random() * 100000000);\n          }\n\n          item.id = item.id + \"_add\" + _this.insertId;\n        }\n\n        return dataArr;\n      }\n    };\n\n    _this.getInsertFormValue = function () {\n      var formData = _this.insertForm.getFieldsValue();\n\n      var newData = {};\n\n      for (var key in formData) {\n        if (formData.hasOwnProperty(key)) {\n          var newKey = key.replace(/_add.*/, \"\");\n          newData[newKey] = formData[key];\n        }\n      }\n\n      return newData;\n    };\n\n    _this.onSearchReady = function (_ref5) {\n      var form = _ref5.form;\n      _this.searchForm = form;\n    };\n\n    _this.getSearchFormFields = function () {\n      var dataArr;\n\n      if (typeof _this.props.getSearchFormFields == \"function\") {\n        dataArr = _this.props.getSearchFormFields();\n      }\n\n      if (Array.isArray(_this.props.getSearchFormFields)) {\n        dataArr = _this.props.getSearchFormFields;\n      }\n\n      for (var i = 0; i < dataArr.length; i++) {\n        var item = dataArr[i];\n\n        if (!_this.searchId) {\n          _this.searchId = parseInt(Math.random() * 100000000);\n        }\n\n        item.id = item.id + \"_search\" + _this.searchId;\n      }\n\n      return dataArr;\n    };\n\n    _this.handleSearch = function () {\n      var params = _this.getSearchFormValue();\n\n      _this.props.onSearchClick(params);\n    };\n\n    _this.handleFilterSearch = function (selectedKeys, confirm, dataIndex) {\n      confirm();\n\n      _this.setState({\n        searchText: selectedKeys[0],\n        searchedColumn: dataIndex\n      });\n    };\n\n    _this.handleReset = function (clearFilters) {\n      clearFilters();\n\n      _this.setState({\n        searchText: \"\"\n      });\n    };\n\n    _this.getSearchFormValue = function () {\n      var formData = _this.searchForm.getFieldsValue();\n\n      var newData = {};\n\n      for (var key in formData) {\n        var newKey = key.replace(/_search.*/, \"\");\n\n        if (formData[key] != null) {\n          newData[newKey] = formData[key];\n\n          if (newKey == \"startTime\" || newKey == \"endTime\") {\n            newData[newKey] = formData[key].unix();\n          }\n        } else {\n          newData[newKey] = \"\";\n        }\n      }\n\n      return newData;\n    };\n\n    _this.handlePagination = function (pagination) {\n      // console.log(\"手动分页 \", pagination);\n      var params = _this.getSearchFormValue(pagination);\n\n      _this.props.onSearchClick(params, pagination);\n    };\n\n    _this.handleResize = function () {\n      if (_this.timer) {\n        clearTimeout(_this.timer);\n      }\n\n      _this.timer = setTimeout(function () {\n        _this.computeTableY();\n      }, 30);\n    };\n\n    _this.onDoubleClick = function (record, event) {\n      // console.log(record);\n      _this.record = record;\n\n      _this.setState({\n        detailModalVisible: true\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(CrudFilterComponent, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      // this.computeTableY();\n      window.addEventListener(\"resize\", this.handleResize); // this.handleResize();\n    } // static getDerivedStateFromProps(nextProps, prevState) {\n    //     console.log(\"getDerivedStateFromProps\");\n    //     return null;\n    // }\n\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (prevProps.dataSource.length != this.props.dataSource.length) {\n        // console.log(\"handleResize\");\n        this.handleResize();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      // console.log(\"componentWillUnmount\");\n      window.removeEventListener(\"resize\", this.handleResize);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          _this$props2$rowKey = _this$props2.rowKey,\n          rowKey = _this$props2$rowKey === void 0 ? \"id\" : _this$props2$rowKey,\n          _this$props2$isShowSe = _this$props2.isShowSearchForm,\n          isShowSearchForm = _this$props2$isShowSe === void 0 ? true : _this$props2$isShowSe,\n          getSearchFormFields = _this$props2.getSearchFormFields,\n          onSearchClick = _this$props2.onSearchClick,\n          searchLoading = _this$props2.searchLoading,\n          _this$props2$insertBt = _this$props2.insertBtnText,\n          insertBtnText = _this$props2$insertBt === void 0 ? \"\" : _this$props2$insertBt,\n          _this$props2$insertMo = _this$props2.insertModalText,\n          insertModalText = _this$props2$insertMo === void 0 ? \"新增记录\" : _this$props2$insertMo,\n          _this$props2$getInser = _this$props2.getInsertFormFields,\n          getInsertFormFields = _this$props2$getInser === void 0 ? function () {} : _this$props2$getInser,\n          _this$props2$updateBt = _this$props2.updateBtnText,\n          updateBtnText = _this$props2$updateBt === void 0 ? \"编辑\" : _this$props2$updateBt,\n          _this$props2$updateMo = _this$props2.updateModalText,\n          updateModalText = _this$props2$updateMo === void 0 ? \"修改记录\" : _this$props2$updateMo,\n          _this$props2$getUpdat = _this$props2.getUpdateFormFields,\n          getUpdateFormFields = _this$props2$getUpdat === void 0 ? function () {} : _this$props2$getUpdat,\n          columns = _this$props2.columns,\n          dataSource = _this$props2.dataSource,\n          scroll = _this$props2.scroll,\n          _this$props2$addBtnAr = _this$props2.addBtnArr,\n          addBtnArr = _this$props2$addBtnAr === void 0 ? null : _this$props2$addBtnAr,\n          rowSelection = _this$props2.rowSelection,\n          _this$props2$dtColumn = _this$props2.dtColumns,\n          dtColumns = _this$props2$dtColumn === void 0 ? [] : _this$props2$dtColumn,\n          detailTitle = _this$props2.detailTitle,\n          rest = _objectWithoutProperties(_this$props2, [\"rowKey\", \"isShowSearchForm\", \"getSearchFormFields\", \"onSearchClick\", \"searchLoading\", \"insertBtnText\", \"insertModalText\", \"getInsertFormFields\", \"updateBtnText\", \"updateModalText\", \"getUpdateFormFields\", \"columns\", \"dataSource\", \"scroll\", \"addBtnArr\", \"rowSelection\", \"dtColumns\", \"detailTitle\"]); // this.pageId = window.pageId++;\n\n\n      if (!this.pageId) {\n        if (!window.pageId) {\n          window.pageId = 1;\n        }\n\n        this.pageId = window.pageId++;\n      }\n\n      if (this.props.onRef) {\n        //如果父组件传来该方法 则调用方法将子组件this指针传过去\n        this.props.onRef(this);\n      } // console.log(\"CurdComponent 渲染 \", this.pageId);\n\n\n      return React.createElement(\"div\", {\n        className: styles.curdComponent + \" curdWraper\" + \" pageId\" + this.pageId,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 427\n        },\n        __self: this\n      }, isShowSearchForm && React.createElement(\"div\", {\n        className: styles.searchWrap,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 436\n        },\n        __self: this\n      }, React.createElement(SearchForm // fields={this.getSearchFormFields()}\n      , {\n        fields: this.props.getSearchFormFields(),\n        onSearchClick: this.handleSearch,\n        searchLoading: searchLoading,\n        pageId: this.pageId,\n        onReady: this.onSearchReady,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 437\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        style: {\n          position: \"relative\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 445\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          position: \"absolute\",\n          width: \"100%\",\n          height: \"5px\",\n          background: \"#ddd\",\n          top: \"-5px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 450\n        },\n        __self: this\n      }))), insertBtnText != \"\" && React.createElement(\"div\", {\n        className: styles.insertWrap,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 463\n        },\n        __self: this\n      }, insertBtnText && React.createElement(_Button, {\n        type: \"primary\",\n        onClick: this.handleInsertBtn,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 465\n        },\n        __self: this\n      }, insertBtnText)), this.props.hasSlot && React.createElement(\"div\", {\n        className: styles.insertWrap,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 475\n        },\n        __self: this\n      }, this.props.children), React.createElement(\"div\", {\n        ref: \"tableWrap\",\n        className: styles.tableWrap,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 479\n        },\n        __self: this\n      }, React.createElement(Table, {\n        rowKey: rowKey,\n        columns: this.addUpdateDeleteColumns(columns(this.getColumnSearchProps)),\n        dataSource: dataSource,\n        scroll: this.state.scroll,\n        rowSelection: rowSelection,\n        handlePagination: this.handlePagination,\n        pagination: this.props.pagination,\n        onDoubleClick: this.onDoubleClick,\n        showDetail: dtColumns.length > 0,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 480\n        },\n        __self: this\n      })), React.createElement(DynamicModal, Object.assign({\n        title: insertModalText,\n        visible: this.state.insertModalVisible,\n        fields: this.getInsertFormFields(),\n        onOk: this.handleInsertModalOk,\n        onCancel: this.handleInsertModalCancel,\n        onReady: this.handleInsertModalReady\n      }, rest, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 494\n        },\n        __self: this\n      })), React.createElement(DynamicModal, Object.assign({\n        title: updateModalText,\n        visible: this.state.updateModalVisible,\n        fields: getUpdateFormFields(),\n        onOk: this.handleUpdateModalOk,\n        onCancel: this.handleUpdateModalCancel,\n        onReady: this.handleUpdateModalReady // col=\"2\"\n        // width=\"600px\"\n\n      }, rest, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 503\n        },\n        __self: this\n      })), React.createElement(DynamicDescriptions, Object.assign({\n        title: detailTitle,\n        visible: this.state.detailModalVisible,\n        onCancel: this.handleDetailModalCancel,\n        fields: dtColumns,\n        record: this.record,\n        onReady: this.handleUpdateModalReady,\n        column: this.props.dtCol,\n        width: this.props.dtWidth\n      }, rest, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 514\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return CrudFilterComponent;\n}(React.PureComponent);\n\nexport { CrudFilterComponent as default };","map":{"version":3,"sources":["D:/company/algo-manage/src/components/CrudFilterComponent/index.js"],"names":["React","Highlighter","styles","SearchForm","DynamicModal","Table","DynamicDescriptions","CrudFilterComponent","state","insertModalVisible","updateModalVisible","detailModalVisible","scroll","props","searchText","searchedColumn","searchMethod","getColumnSearchProps","handleInsertBtn","setState","handleInsertModalReady","form","insertForm","onInsertModalReady","handleInsertModalOk","insertRecord","validateFields","err","values","getInsertFormValue","resetFields","handleInsertModalCancel","handleUpdateModalReady","updateForm","onUpdateModalReady","handleUpdateModalOk","updateRecord","handleUpdateModalCancel","handleDetailModalCancel","addUpdateDeleteColumns","columns","newCol","deleteRecord","setUpdateModal","title","key","align","fixed","width","render","text","record","color","setTimeout","margin","dataIndex","filterDropdown","setSelectedKeys","selectedKeys","confirm","clearFilters","padding","node","searchInput","e","target","value","handleFilterSearch","marginBottom","display","marginRight","handleReset","onFilter","toString","toLowerCase","includes","onFilterDropdownVisibleChange","visible","select","backgroundColor","computeTableY","pageWraper","document","querySelector","pageId","thHeight","offsetHeight","pagiDiv","pagiHeight","pagiMt","getComputedStyle","marginTop","replace","pagiMb","computeY","refs","tableWrap","clientHeight","Object","assign","y","style","height","getInsertFormFields","dataArr","i","length","item","insertId","parseInt","Math","random","id","formData","getFieldsValue","newData","hasOwnProperty","newKey","onSearchReady","searchForm","getSearchFormFields","Array","isArray","searchId","handleSearch","params","getSearchFormValue","onSearchClick","unix","handlePagination","pagination","handleResize","timer","clearTimeout","onDoubleClick","event","window","addEventListener","prevProps","prevState","dataSource","removeEventListener","rowKey","isShowSearchForm","searchLoading","insertBtnText","insertModalText","updateBtnText","updateModalText","getUpdateFormFields","addBtnArr","rowSelection","dtColumns","detailTitle","rest","onRef","curdComponent","searchWrap","position","background","top","insertWrap","hasSlot","children","dtCol","dtWidth","PureComponent"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Button, Popconfirm, Input } from \"antd\";\r\nimport Highlighter from \"react-highlight-words\";\r\nimport styles from \"./index.module.less\";\r\nimport SearchForm from \"@/components/SearchForm\";\r\nimport DynamicModal from \"@/components/DynamicModal\";\r\nimport Table from \"@/components/Table\";\r\nimport DynamicDescriptions from \"@/components/DynamicDescriptions\";\r\n\r\nexport default class CrudFilterComponent extends React.PureComponent {\r\n    state = {\r\n        insertModalVisible: false,\r\n        updateModalVisible: false,\r\n        detailModalVisible: false,\r\n        scroll: this.props.scroll,\r\n        searchText: \"\",\r\n        searchedColumn: \"\",\r\n        searchMethod: {\r\n            getColumnSearchProps: this.getColumnSearchProps,\r\n        },\r\n    };\r\n    handleInsertBtn = () => {\r\n        this.setState({\r\n            insertModalVisible: true,\r\n            // updateModalVisible: true\r\n        });\r\n    };\r\n    handleInsertModalReady = ({ form }) => {\r\n        this.insertForm = form;\r\n        let { onInsertModalReady } = this.props;\r\n        if (typeof onInsertModalReady == \"function\") {\r\n            onInsertModalReady({ form });\r\n        }\r\n    };\r\n    handleInsertModalOk = () => {\r\n        let { insertRecord } = this.props;\r\n        if (typeof insertRecord == \"function\") {\r\n            // insertRecord({ form: this.insertForm });\r\n            this.insertForm.validateFields((err, values) => {\r\n                if (!err) {\r\n                    insertRecord(this.getInsertFormValue());\r\n                    this.insertForm.resetFields();\r\n                    this.setState({\r\n                        insertModalVisible: false,\r\n                    });\r\n                }\r\n            });\r\n        }\r\n    };\r\n    handleInsertModalCancel = () => {\r\n        this.setState({\r\n            insertModalVisible: false,\r\n        });\r\n    };\r\n    //更新\r\n    handleUpdateModalReady = ({ form }) => {\r\n        // console.log(\"handleUpdateModalReady\");\r\n        this.updateForm = form;\r\n        let { onUpdateModalReady } = this.props;\r\n        if (typeof onUpdateModalReady == \"function\") {\r\n            onUpdateModalReady({ form });\r\n        }\r\n    };\r\n    handleUpdateModalOk = () => {\r\n        let { updateRecord } = this.props;\r\n        if (typeof updateRecord == \"function\") {\r\n            updateRecord({ form: this.updateForm });\r\n        }\r\n        this.setState({\r\n            updateModalVisible: false,\r\n        });\r\n    };\r\n    handleUpdateModalCancel = () => {\r\n        this.setState({\r\n            updateModalVisible: false,\r\n        });\r\n    };\r\n    handleDetailModalCancel = () => {\r\n        this.setState({\r\n            detailModalVisible: false,\r\n        });\r\n    };\r\n    // 增加 操作 按钮\r\n    addUpdateDeleteColumns = (columns) => {\r\n        let newCol = columns;\r\n        let { updateRecord, deleteRecord, setUpdateModal } = this.props;\r\n        if (updateRecord || deleteRecord) {\r\n            newCol = [\r\n                ...columns,\r\n                {\r\n                    title: \"操作\",\r\n                    key: \"action\",\r\n                    align: \"center\",\r\n                    fixed: \"right\",\r\n                    width: 120,\r\n                    render: (text, record) => {\r\n                        return (\r\n                            <div>\r\n                                {updateRecord && (\r\n                                    <a\r\n                                        // style={{ color: \"#3281ff\" }}\r\n                                        style={{ color: \"#3281ff\" }}\r\n                                        onClick={() => {\r\n                                            this.setState({\r\n                                                updateModalVisible: true,\r\n                                            });\r\n                                            if (this.updateForm) {\r\n                                                setUpdateModal({\r\n                                                    form: this.updateForm,\r\n                                                    record,\r\n                                                });\r\n                                            } else {\r\n                                                //第一次 updateModal 需要创建 动态表单\r\n                                                setTimeout(() => {\r\n                                                    setUpdateModal({\r\n                                                        form: this.updateForm,\r\n                                                        record,\r\n                                                    });\r\n                                                }, 0);\r\n                                            }\r\n                                        }}\r\n                                    >\r\n                                        编辑\r\n                                    </a>\r\n                                )}\r\n                                {deleteRecord && (\r\n                                    <Popconfirm\r\n                                        title=\"是否确认删除?\"\r\n                                        onConfirm={async () =>\r\n                                            deleteRecord(record)\r\n                                        }\r\n                                        okText=\"确认\"\r\n                                        cancelText=\"取消\"\r\n                                    >\r\n                                        <a\r\n                                            style={{\r\n                                                color: \"#3281ff\",\r\n                                                margin: \"0 16px\",\r\n                                            }}\r\n                                        >\r\n                                            删除\r\n                                        </a>\r\n                                    </Popconfirm>\r\n                                )}\r\n                            </div>\r\n                        );\r\n                    },\r\n                },\r\n            ];\r\n        }\r\n        return newCol;\r\n    };\r\n    getColumnSearchProps = (dataIndex) => ({\r\n        filterDropdown: ({\r\n            setSelectedKeys,\r\n            selectedKeys,\r\n            confirm,\r\n            clearFilters,\r\n        }) => (\r\n            <div style={{ padding: 8 }}>\r\n                <Input\r\n                    ref={(node) => {\r\n                        this.searchInput = node;\r\n                    }}\r\n                    placeholder={`筛选 ${dataIndex}`}\r\n                    value={selectedKeys[0]}\r\n                    onChange={(e) =>\r\n                        setSelectedKeys(e.target.value ? [e.target.value] : [])\r\n                    }\r\n                    onPressEnter={() =>\r\n                        this.handleFilterSearch(\r\n                            selectedKeys,\r\n                            confirm,\r\n                            dataIndex\r\n                        )\r\n                    }\r\n                    style={{ width: 188, marginBottom: 8, display: \"block\" }}\r\n                />\r\n                <Button\r\n                    type=\"primary\"\r\n                    onClick={() =>\r\n                        this.handleFilterSearch(\r\n                            selectedKeys,\r\n                            confirm,\r\n                            dataIndex\r\n                        )\r\n                    }\r\n                    // icon={<SearchOutlined />}\r\n                    size=\"small\"\r\n                    style={{ width: 90, marginRight: 8 }}\r\n                >\r\n                    查询\r\n                </Button>\r\n                <Button\r\n                    onClick={() => this.handleReset(clearFilters)}\r\n                    size=\"small\"\r\n                    style={{ width: 90 }}\r\n                >\r\n                    重置\r\n                </Button>\r\n            </div>\r\n        ),\r\n        onFilter: (value, record) =>\r\n            record[dataIndex]\r\n                .toString()\r\n                .toLowerCase()\r\n                .includes(value.toLowerCase()),\r\n        onFilterDropdownVisibleChange: (visible) => {\r\n            if (visible) {\r\n                setTimeout(() => this.searchInput.select());\r\n            }\r\n        },\r\n        render: (text) =>\r\n            this.state.searchedColumn === dataIndex ? (\r\n                <Highlighter\r\n                    highlightStyle={{ backgroundColor: \"#ffc069\", padding: 0 }}\r\n                    searchWords={[this.state.searchText]}\r\n                    autoEscape\r\n                    textToHighlight={text.toString()}\r\n                />\r\n            ) : (\r\n                text\r\n            ),\r\n    });\r\n    //计算table scroll 纵向高度\r\n    computeTableY = () => {\r\n        let pageWraper = document.querySelector(\".pageId\" + this.pageId);\r\n        let thHeight =\r\n            pageWraper.querySelector(\".ant-table-thead\").offsetHeight;\r\n        let pagiDiv = pageWraper.querySelector(\r\n            \".ant-pagination.ant-table-pagination\"\r\n        );\r\n        if (pagiDiv) {\r\n            let pagiHeight = pagiDiv.offsetHeight;\r\n            let pagiMt =\r\n                getComputedStyle(pagiDiv).marginTop.replace(/px/, \"\") / 1;\r\n            let pagiMb =\r\n                getComputedStyle(pagiDiv).marginBottom.replace(/px/, \"\") / 1;\r\n            // console.log(thHeight + pagiHeight + pagiMt + pagiMb);\r\n            let computeY =\r\n                this.refs.tableWrap.clientHeight -\r\n                thHeight -\r\n                pagiHeight -\r\n                pagiMt -\r\n                pagiMb;\r\n            this.setState(\r\n                {\r\n                    scroll: Object.assign({}, this.state.scroll, {\r\n                        y: computeY,\r\n                    }),\r\n                },\r\n                () => {\r\n                    this.refs.tableWrap.querySelector(\r\n                        \".ant-table-body\"\r\n                    ).style.height = computeY + \"px\";\r\n                }\r\n            );\r\n        } else {\r\n            this.setState(\r\n                {\r\n                    scroll: Object.assign({}, this.state.scroll, {\r\n                        y: 0,\r\n                    }),\r\n                },\r\n                () => {\r\n                    this.refs.tableWrap.querySelector(\r\n                        \".ant-table-body\"\r\n                    ).style.height = \"54px\";\r\n                }\r\n            );\r\n        }\r\n    };\r\n    //添加随机id\r\n    getInsertFormFields = () => {\r\n        if (typeof this.props.getInsertFormFields == \"function\") {\r\n            let dataArr = this.props.getInsertFormFields();\r\n            for (let i = 0; i < dataArr.length; i++) {\r\n                const item = dataArr[i];\r\n                if (!this.insertId) {\r\n                    this.insertId = parseInt(Math.random() * 100000000);\r\n                }\r\n                item.id = item.id + \"_add\" + this.insertId;\r\n            }\r\n            return dataArr;\r\n        }\r\n    };\r\n    //处理InsertForm结果\r\n    getInsertFormValue = () => {\r\n        let formData = this.insertForm.getFieldsValue();\r\n        let newData = {};\r\n        for (const key in formData) {\r\n            if (formData.hasOwnProperty(key)) {\r\n                let newKey = key.replace(/_add.*/, \"\");\r\n                newData[newKey] = formData[key];\r\n            }\r\n        }\r\n        return newData;\r\n    };\r\n\r\n    onSearchReady = ({ form }) => {\r\n        this.searchForm = form;\r\n    };\r\n    //添加随机id\r\n    getSearchFormFields = () => {\r\n        let dataArr;\r\n        if (typeof this.props.getSearchFormFields == \"function\") {\r\n            dataArr = this.props.getSearchFormFields();\r\n        }\r\n        if (Array.isArray(this.props.getSearchFormFields)) {\r\n            dataArr = this.props.getSearchFormFields;\r\n        }\r\n        for (let i = 0; i < dataArr.length; i++) {\r\n            const item = dataArr[i];\r\n            if (!this.searchId) {\r\n                this.searchId = parseInt(Math.random() * 100000000);\r\n            }\r\n            item.id = item.id + \"_search\" + this.searchId;\r\n        }\r\n        return dataArr;\r\n    };\r\n    handleSearch = () => {\r\n        let params = this.getSearchFormValue();\r\n        this.props.onSearchClick(params);\r\n    };\r\n    handleFilterSearch = (selectedKeys, confirm, dataIndex) => {\r\n        confirm();\r\n        this.setState({\r\n            searchText: selectedKeys[0],\r\n            searchedColumn: dataIndex,\r\n        });\r\n    };\r\n    handleReset = (clearFilters) => {\r\n        clearFilters();\r\n        this.setState({ searchText: \"\" });\r\n    };\r\n    //处理SearchForm结果\r\n    getSearchFormValue = () => {\r\n        let formData = this.searchForm.getFieldsValue();\r\n        let newData = {};\r\n        for (const key in formData) {\r\n            let newKey = key.replace(/_search.*/, \"\");\r\n            if (formData[key] != null) {\r\n                newData[newKey] = formData[key];\r\n                if (newKey == \"startTime\" || newKey == \"endTime\") {\r\n                    newData[newKey] = formData[key].unix();\r\n                }\r\n            } else {\r\n                newData[newKey] = \"\";\r\n            }\r\n        }\r\n        return newData;\r\n    };\r\n    handlePagination = (pagination) => {\r\n        // console.log(\"手动分页 \", pagination);\r\n        let params = this.getSearchFormValue(pagination);\r\n        this.props.onSearchClick(params, pagination);\r\n    };\r\n    //handleResize 窗口尺寸变化时触发事件\r\n    handleResize = () => {\r\n        if (this.timer) {\r\n            clearTimeout(this.timer);\r\n        }\r\n        this.timer = setTimeout(() => {\r\n            this.computeTableY();\r\n        }, 30);\r\n    };\r\n    onDoubleClick = (record, event) => {\r\n        // console.log(record);\r\n        this.record = record;\r\n        this.setState({ detailModalVisible: true });\r\n    };\r\n    componentDidMount() {\r\n        // this.computeTableY();\r\n        window.addEventListener(\"resize\", this.handleResize);\r\n        // this.handleResize();\r\n    }\r\n    // static getDerivedStateFromProps(nextProps, prevState) {\r\n    //     console.log(\"getDerivedStateFromProps\");\r\n    //     return null;\r\n    // }\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (prevProps.dataSource.length != this.props.dataSource.length) {\r\n            // console.log(\"handleResize\");\r\n            this.handleResize();\r\n        }\r\n    }\r\n    componentWillUnmount() {\r\n        // console.log(\"componentWillUnmount\");\r\n        window.removeEventListener(\"resize\", this.handleResize);\r\n    }\r\n    render() {\r\n        let {\r\n            rowKey = \"id\",\r\n            isShowSearchForm = true, //是否显示 搜索框\r\n            getSearchFormFields, //搜索框的搜索列表\r\n            onSearchClick, //搜索按钮点击事件\r\n            searchLoading, //搜索按钮loading状态\r\n            insertBtnText = \"\", //新增按钮内容\r\n            insertModalText = \"新增记录\", //新增弹框标题\r\n            getInsertFormFields = () => {}, //新增弹框表单内容\r\n            updateBtnText = \"编辑\", //更新按钮内容\r\n            updateModalText = \"修改记录\", //更新弹框标题\r\n            getUpdateFormFields = () => {}, //更新弹框表单内容\r\n            columns, //table 表头\r\n            dataSource, //table 数据源,\r\n            scroll, // table 滚动距离\r\n            addBtnArr = null, //按钮组\r\n            rowSelection, //批量选择\r\n            dtColumns = [], //详情列表\r\n            detailTitle, //详情标题\r\n            ...rest\r\n        } = this.props;\r\n\r\n        // this.pageId = window.pageId++;\r\n        if (!this.pageId) {\r\n            if (!window.pageId) {\r\n                window.pageId = 1;\r\n            }\r\n            this.pageId = window.pageId++;\r\n        }\r\n        if (this.props.onRef) {\r\n            //如果父组件传来该方法 则调用方法将子组件this指针传过去\r\n            this.props.onRef(this);\r\n        }\r\n        // console.log(\"CurdComponent 渲染 \", this.pageId);\r\n        return (\r\n            <div\r\n                className={\r\n                    styles.curdComponent +\r\n                    \" curdWraper\" +\r\n                    \" pageId\" +\r\n                    this.pageId\r\n                }\r\n            >\r\n                {isShowSearchForm && (\r\n                    <div className={styles.searchWrap}>\r\n                        <SearchForm\r\n                            // fields={this.getSearchFormFields()}\r\n                            fields={this.props.getSearchFormFields()}\r\n                            onSearchClick={this.handleSearch}\r\n                            searchLoading={searchLoading}\r\n                            pageId={this.pageId}\r\n                            onReady={this.onSearchReady}\r\n                        ></SearchForm>\r\n                        <div\r\n                            style={{\r\n                                position: \"relative\",\r\n                            }}\r\n                        >\r\n                            <div\r\n                                style={{\r\n                                    position: \"absolute\",\r\n                                    width: \"100%\",\r\n                                    height: \"5px\",\r\n                                    background: \"#ddd\",\r\n                                    top: \"-5px\",\r\n                                }}\r\n                            ></div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n                {insertBtnText != \"\" && (\r\n                    <div className={styles.insertWrap}>\r\n                        {insertBtnText && (\r\n                            <Button\r\n                                type=\"primary\"\r\n                                onClick={this.handleInsertBtn}\r\n                            >\r\n                                {insertBtnText}\r\n                            </Button>\r\n                        )}\r\n                    </div>\r\n                )}\r\n                {this.props.hasSlot && (\r\n                    <div className={styles.insertWrap}>\r\n                        {this.props.children}\r\n                    </div>\r\n                )}\r\n                <div ref=\"tableWrap\" className={styles.tableWrap}>\r\n                    <Table\r\n                        rowKey={rowKey}\r\n                        columns={this.addUpdateDeleteColumns(\r\n                            columns(this.getColumnSearchProps)\r\n                        )}\r\n                        dataSource={dataSource}\r\n                        scroll={this.state.scroll}\r\n                        rowSelection={rowSelection}\r\n                        handlePagination={this.handlePagination}\r\n                        pagination={this.props.pagination}\r\n                        onDoubleClick={this.onDoubleClick}\r\n                        showDetail={dtColumns.length > 0}\r\n                    ></Table>\r\n                </div>\r\n                <DynamicModal\r\n                    title={insertModalText}\r\n                    visible={this.state.insertModalVisible}\r\n                    fields={this.getInsertFormFields()}\r\n                    onOk={this.handleInsertModalOk}\r\n                    onCancel={this.handleInsertModalCancel}\r\n                    onReady={this.handleInsertModalReady}\r\n                    {...rest}\r\n                ></DynamicModal>\r\n                <DynamicModal\r\n                    title={updateModalText}\r\n                    visible={this.state.updateModalVisible}\r\n                    fields={getUpdateFormFields()}\r\n                    onOk={this.handleUpdateModalOk}\r\n                    onCancel={this.handleUpdateModalCancel}\r\n                    onReady={this.handleUpdateModalReady}\r\n                    // col=\"2\"\r\n                    // width=\"600px\"\r\n                    {...rest}\r\n                ></DynamicModal>\r\n                <DynamicDescriptions\r\n                    title={detailTitle}\r\n                    visible={this.state.detailModalVisible}\r\n                    onCancel={this.handleDetailModalCancel}\r\n                    fields={dtColumns}\r\n                    record={this.record}\r\n                    onReady={this.handleUpdateModalReady}\r\n                    column={this.props.dtCol}\r\n                    width={this.props.dtWidth}\r\n                    {...rest}\r\n                ></DynamicDescriptions>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}