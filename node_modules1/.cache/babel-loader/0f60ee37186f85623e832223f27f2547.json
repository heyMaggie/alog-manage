{"ast":null,"code":"import \"antd/lib/upload/style\";\nimport _Upload from \"antd/lib/upload\";\nimport \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/icon/style\";\nimport _Icon from \"antd/lib/icon\";\nimport _classCallCheck from \"D:\\\\company\\\\algo-manage\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\company\\\\algo-manage\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\company\\\\algo-manage\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\company\\\\algo-manage\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\company\\\\algo-manage\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\company\\\\algo-manage\\\\src\\\\components\\\\UploadWrap\\\\index.js\";\nimport React from \"react\"; // import styles from \"./index.module.less\";\n\nvar UploadWrap =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  _inherits(UploadWrap, _React$PureComponent);\n\n  function UploadWrap() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, UploadWrap);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(UploadWrap)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.handleDownload = function () {\n      if (_this.props.handleDownload) {\n        _this.props.handleDownload();\n      } else {\n        window.location.href = window.baseURL + _this.props.urlPrefix + \"/download\";\n\n        if (_this.props.downloadUrl) {\n          window.location.href = _this.props.downloadUrl;\n        }\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(UploadWrap, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var uploadOption = this.props.uploadOption;\n      var url = window.baseURL + this.props.urlPrefix + \"/upload\"; // console.log(this.props.uploadUrl, window.pfBaseUrl);\n\n      if (this.props.uploadUrl) {\n        url = this.props.uploadUrl;\n      }\n\n      if (this.props.upLoadCSvUrl) {\n        url = window.baseURL + this.props.upLoadCSvUrl;\n      }\n\n      var fileType = this.props.type ? this.props.type : \".xml\"; // let data = null;\n      // let data = this.props.type ? sessionStorage.userName : null;\n\n      console.log(sessionStorage.userName, \"sessionStorage.userName\");\n\n      if (!uploadOption) {\n        uploadOption = {\n          name: \"file\",\n          accept: fileType,\n          showUploadList: false,\n          action: url,\n          data: data,\n          headers: {\n            \"X-Requested-With\": null\n          },\n          onChange: function onChange(info) {\n            if (info.file.status !== \"uploading\") {// console.log(info.file, info.fileList);\n            }\n\n            if (info.file.status === \"done\") {\n              if (info.file.response.code == 0) {\n                message.success(\"\".concat(info.file.name, \" \\u4E0A\\u4F20\\u6210\\u529F\"));\n\n                if (_this2.props.sucCallback) {\n                  _this2.props.sucCallback();\n                }\n              } else {\n                var msg = info.file.response.message;\n\n                if (msg.lastIndexOf(\"]\") > msg.indexOf(\"[\")) {\n                  message.error(msg.substring(msg.indexOf(\"[\") + 1, msg.lastIndexOf(\"]\")));\n                } else {\n                  message.error(\"\".concat(info.file.response.message));\n                }\n              }\n            } else if (info.file.status === \"error\") {\n              message.error(\"\".concat(info.file.name, \" \\u4E0A\\u4F20\\u5931\\u8D25\"));\n            }\n          }\n        }; // uploadOption.append(\"sourcePath\", 111);\n      }\n\n      var _this$props = this.props,\n          _this$props$title = _this$props.title,\n          title = _this$props$title === void 0 ? \"\" : _this$props$title,\n          noUpload = _this$props.noUpload,\n          noDownload = _this$props.noDownload; // noUpload 没有上传按钮\n\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, !noUpload && React.createElement(_Upload, Object.assign({}, uploadOption, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }), React.createElement(_Button, {\n        type: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(_Icon, {\n        type: \"upload\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }), \" \", \"\".concat(title, \"\\u4E0A\\u4F20\"))), !noDownload && React.createElement(_Button, {\n        type: \"primary\",\n        onClick: this.handleDownload,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(_Icon, {\n        type: \"download\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }), \" \", \"\".concat(title, \"\\u5BFC\\u51FA\")));\n    }\n  }]);\n\n  return UploadWrap;\n}(React.PureComponent);\n\nexport { UploadWrap as default };","map":{"version":3,"sources":["D:/company/algo-manage/src/components/UploadWrap/index.js"],"names":["React","UploadWrap","handleDownload","props","window","location","href","baseURL","urlPrefix","downloadUrl","uploadOption","url","uploadUrl","upLoadCSvUrl","fileType","type","console","log","sessionStorage","userName","name","accept","showUploadList","action","data","headers","onChange","info","file","status","response","code","message","success","sucCallback","msg","lastIndexOf","indexOf","error","substring","title","noUpload","noDownload","PureComponent"],"mappings":"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","sourcesContent":["import React from \"react\";\r\n// import styles from \"./index.module.less\";\r\nimport { Button, Upload, Icon } from \"antd\";\r\n\r\nexport default class UploadWrap extends React.PureComponent {\r\n    handleDownload = () => {\r\n        if (this.props.handleDownload) {\r\n            this.props.handleDownload();\r\n        } else {\r\n            window.location.href =\r\n                window.baseURL + this.props.urlPrefix + \"/download\";\r\n            if (this.props.downloadUrl) {\r\n                window.location.href = this.props.downloadUrl;\r\n            }\r\n        }\r\n    };\r\n    render() {\r\n        let uploadOption = this.props.uploadOption;\r\n        let url = window.baseURL + this.props.urlPrefix + \"/upload\";\r\n        // console.log(this.props.uploadUrl, window.pfBaseUrl);\r\n        if (this.props.uploadUrl) {\r\n            url = this.props.uploadUrl;\r\n        }\r\n        if (this.props.upLoadCSvUrl) {\r\n            url = window.baseURL + this.props.upLoadCSvUrl;\r\n        }\r\n        let fileType = this.props.type ? this.props.type : \".xml\";\r\n        // let data = null;\r\n        // let data = this.props.type ? sessionStorage.userName : null;\r\n        console.log(sessionStorage.userName, \"sessionStorage.userName\");\r\n        if (!uploadOption) {\r\n            uploadOption = {\r\n                name: \"file\",\r\n                accept: fileType,\r\n                showUploadList: false,\r\n                action: url,\r\n                data: data,\r\n                headers: { \"X-Requested-With\": null },\r\n                onChange: (info) => {\r\n                    if (info.file.status !== \"uploading\") {\r\n                        // console.log(info.file, info.fileList);\r\n                    }\r\n                    if (info.file.status === \"done\") {\r\n                        if (info.file.response.code == 0) {\r\n                            message.success(`${info.file.name} 上传成功`);\r\n                            if (this.props.sucCallback) {\r\n                                this.props.sucCallback();\r\n                            }\r\n                        } else {\r\n                            let msg = info.file.response.message;\r\n                            if (msg.lastIndexOf(\"]\") > msg.indexOf(\"[\")) {\r\n                                message.error(\r\n                                    msg.substring(\r\n                                        msg.indexOf(\"[\") + 1,\r\n                                        msg.lastIndexOf(\"]\")\r\n                                    )\r\n                                );\r\n                            } else {\r\n                                message.error(`${info.file.response.message}`);\r\n                            }\r\n                        }\r\n                    } else if (info.file.status === \"error\") {\r\n                        message.error(`${info.file.name} 上传失败`);\r\n                    }\r\n                },\r\n            };\r\n            // uploadOption.append(\"sourcePath\", 111);\r\n        }\r\n        let { title = \"\", noUpload, noDownload } = this.props;\r\n        // noUpload 没有上传按钮\r\n        return (\r\n            <React.Fragment>\r\n                {!noUpload && (\r\n                    <Upload {...uploadOption}>\r\n                        <Button type=\"primary\">\r\n                            <Icon type=\"upload\" /> {`${title}上传`}\r\n                        </Button>\r\n                    </Upload>\r\n                )}\r\n                {!noDownload && (\r\n                    <Button type=\"primary\" onClick={this.handleDownload}>\r\n                        <Icon type=\"download\" /> {`${title}导出`}\r\n                    </Button>\r\n                )}\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}