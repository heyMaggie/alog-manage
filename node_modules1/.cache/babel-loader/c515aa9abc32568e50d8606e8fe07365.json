{"ast":null,"code":"import _classCallCheck from \"D:\\\\company\\\\algo-manage\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\company\\\\algo-manage\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\company\\\\algo-manage\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\company\\\\algo-manage\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\company\\\\algo-manage\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport \"antd/lib/menu/style\";\nimport _Menu from \"antd/lib/menu\";\nvar _jsxFileName = \"D:\\\\company\\\\algo-manage\\\\src\\\\components\\\\SiderMenu\\\\index.js\";\nimport React, { PureComponent } from \"react\";\nimport { withRouter } from \"react-router-dom\"; // import menus from \"../../config/menus\";\n\nimport { connect } from \"react-redux\";\nimport styles from \"./index.module.less\";\nvar SubMenu = _Menu.SubMenu;\n\nvar Menus =\n/*#__PURE__*/\nfunction (_PureComponent) {\n  _inherits(Menus, _PureComponent);\n\n  function Menus() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Menus);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Menus)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      openKeys: []\n    };\n\n    _this.renderMenu = function (menuArr) {\n      // console.log(\"menuArr \", menuArr);\n      return menuArr.map(function (item) {\n        if (item.children) {\n          return React.createElement(SubMenu, {\n            title: React.createElement(\"span\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 21\n              },\n              __self: this\n            }, React.createElement(\"span\", {\n              className: styles[\"\".concat(item.icon)],\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 23\n              },\n              __self: this\n            }), React.createElement(\"span\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 24\n              },\n              __self: this\n            }, item.title)),\n            key: item.path,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 19\n            },\n            __self: this\n          }, _this.renderMenu(item.children));\n        }\n\n        return React.createElement(_Menu.Item, {\n          key: item.path,\n          onClick: _this.handleMenuClick,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 34\n          },\n          __self: this\n        }, item.title);\n      });\n    };\n\n    _this.handleMenuClick = function (menu) {\n      // console.log(this.props);\n      _this.props.history.push(menu.key);\n    };\n\n    _this.getOpenKeys = function (menus, selectedKey, firstLevel) {\n      if (menus.length >= 0) {\n        for (var i = 0; i < menus.length; i++) {\n          var submenu = menus[i]; // console.log(\"submenu :\", submenu);\n\n          if (submenu.children) {\n            //首层 初始化 展开的菜单\n            if (firstLevel) {\n              _this.keys = [];\n            }\n\n            _this.keys.push(submenu.path);\n\n            var res = _this.findPath(submenu.children, selectedKey);\n\n            if (res.length > 0) {\n              // console.log(\"找到了 \", selectedKey);\n              // console.log(\"上级菜单 \", this.keys);\n              break;\n            } else {\n              _this.getOpenKeys(submenu.children, selectedKey);\n            }\n          }\n        }\n      }\n    };\n\n    _this.findPath = function (arr, path) {\n      var res = arr.filter(function (item) {\n        return item.path == path;\n      });\n      return res;\n    };\n\n    _this.onOpenChange = function (openKeys) {\n      console.log(\"openKeys :\", openKeys);\n\n      _this.setState({\n        openKeys: openKeys\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Menus, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {// this.setState({\n      //   openKeys: t\n      // });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      // console.log(this.props);\n      var path = this.props.path; //获取默认 展开菜单\n\n      this.keys = [];\n      this.getOpenKeys(window.menus, path, true);\n      this.defaultOpenKeys = this.keys ? this.keys : [\"/main/option\"];\n      this.defaultSelectedKeys = path ? [path] : [\"/main/algo/buy\"]; // this.defaultOpenKeys = [\"/main\"];\n      // this.defaultSelectedKeys = [\"/main/test\"];\n      // console.log(\"默认展开菜单 :\", this.defaultOpenKeys);\n      // console.log(\"默认选中 :\", this.defaultSelectedKeys);\n\n      return React.createElement(\"div\", {\n        className: styles.slider,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(_Menu, {\n        mode: \"inline\" // theme=\"dark\"\n        ,\n        defaultSelectedKeys: this.defaultSelectedKeys,\n        defaultOpenKeys: this.defaultOpenKeys // onOpenChange={this.onOpenChange}\n        ,\n        selectedKeys: this.defaultSelectedKeys,\n        style: {\n          borderRight: 0\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, this.renderMenu(window.menus)));\n    }\n  }]);\n\n  return Menus;\n}(PureComponent);\n\nvar mapStateToProps = function mapStateToProps(state, ownProps) {\n  return {\n    path: state.RouterModel.path\n  };\n};\n\nexport default connect(mapStateToProps, null)(withRouter(Menus)); // export default withRouter(Menus);","map":{"version":3,"sources":["D:/company/algo-manage/src/components/SiderMenu/index.js"],"names":["React","PureComponent","withRouter","connect","styles","SubMenu","Menus","state","openKeys","renderMenu","menuArr","map","item","children","icon","title","path","handleMenuClick","menu","props","history","push","key","getOpenKeys","menus","selectedKey","firstLevel","length","i","submenu","keys","res","findPath","arr","filter","onOpenChange","console","log","setState","window","defaultOpenKeys","defaultSelectedKeys","slider","borderRight","mapStateToProps","ownProps","RouterModel"],"mappings":"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","sourcesContent":["import React, { PureComponent } from \"react\";\r\nimport { Menu, Icon } from \"antd\";\r\nimport { withRouter } from \"react-router-dom\";\r\n// import menus from \"../../config/menus\";\r\nimport { connect } from \"react-redux\";\r\nimport styles from \"./index.module.less\";\r\n\r\nconst { SubMenu } = Menu;\r\n\r\nclass Menus extends PureComponent {\r\n    state = {\r\n        openKeys: [],\r\n    };\r\n    renderMenu = (menuArr) => {\r\n        // console.log(\"menuArr \", menuArr);\r\n        return menuArr.map((item) => {\r\n            if (item.children) {\r\n                return (\r\n                    <SubMenu\r\n                        title={\r\n                            <span>\r\n                                {/* <Icon type={item.icon || \"home\"}></Icon> */}\r\n                                <span className={styles[`${item.icon}`]}></span>\r\n                                <span>{item.title}</span>\r\n                            </span>\r\n                        }\r\n                        key={item.path}\r\n                    >\r\n                        {this.renderMenu(item.children)}\r\n                    </SubMenu>\r\n                );\r\n            }\r\n            return (\r\n                <Menu.Item key={item.path} onClick={this.handleMenuClick}>\r\n                    {item.title}\r\n                </Menu.Item>\r\n            );\r\n        });\r\n    };\r\n    handleMenuClick = (menu) => {\r\n        // console.log(this.props);\r\n        this.props.history.push(menu.key);\r\n    };\r\n    //获取应该 展开的子菜单\r\n    getOpenKeys = (menus, selectedKey, firstLevel) => {\r\n        if (menus.length >= 0) {\r\n            for (let i = 0; i < menus.length; i++) {\r\n                const submenu = menus[i];\r\n                // console.log(\"submenu :\", submenu);\r\n                if (submenu.children) {\r\n                    //首层 初始化 展开的菜单\r\n                    if (firstLevel) {\r\n                        this.keys = [];\r\n                    }\r\n                    this.keys.push(submenu.path);\r\n                    let res = this.findPath(submenu.children, selectedKey);\r\n                    if (res.length > 0) {\r\n                        // console.log(\"找到了 \", selectedKey);\r\n                        // console.log(\"上级菜单 \", this.keys);\r\n                        break;\r\n                    } else {\r\n                        this.getOpenKeys(submenu.children, selectedKey);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n    findPath = (arr, path) => {\r\n        let res = arr.filter((item) => item.path == path);\r\n        return res;\r\n    };\r\n\r\n    onOpenChange = (openKeys) => {\r\n        console.log(\"openKeys :\", openKeys);\r\n        this.setState({\r\n            openKeys: openKeys,\r\n        });\r\n    };\r\n    componentDidMount() {\r\n        // this.setState({\r\n        //   openKeys: t\r\n        // });\r\n    }\r\n    render() {\r\n        // console.log(this.props);\r\n        let { path } = this.props;\r\n        //获取默认 展开菜单\r\n        this.keys = [];\r\n        this.getOpenKeys(window.menus, path, true);\r\n        this.defaultOpenKeys = this.keys ? this.keys : [\"/main/option\"];\r\n        this.defaultSelectedKeys = path ? [path] : [\"/main/algo/buy\"];\r\n        // this.defaultOpenKeys = [\"/main\"];\r\n        // this.defaultSelectedKeys = [\"/main/test\"];\r\n        // console.log(\"默认展开菜单 :\", this.defaultOpenKeys);\r\n        // console.log(\"默认选中 :\", this.defaultSelectedKeys);\r\n        return (\r\n            <div className={styles.slider}>\r\n                {/* <div className={styles.logo}>\r\n                    <img src=\"./assets/logo.png\" alt=\"\" />\r\n                    <h1>华云信息</h1>\r\n                </div> */}\r\n                <Menu\r\n                    mode=\"inline\"\r\n                    // theme=\"dark\"\r\n                    defaultSelectedKeys={this.defaultSelectedKeys}\r\n                    defaultOpenKeys={this.defaultOpenKeys}\r\n                    // onOpenChange={this.onOpenChange}\r\n                    selectedKeys={this.defaultSelectedKeys}\r\n                    style={{ borderRight: 0 }}\r\n                >\r\n                    {this.renderMenu(window.menus)}\r\n                </Menu>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    return {\r\n        path: state.RouterModel.path,\r\n    };\r\n};\r\nexport default connect(mapStateToProps, null)(withRouter(Menus));\r\n// export default withRouter(Menus);\r\n"]},"metadata":{},"sourceType":"module"}